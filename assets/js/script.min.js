 const Config={roles:[ "Full-Stack & App Developer","Computer Scientist & Engineer","AI Media Specialist","Eternal Learner",],timing:{typeDelay:80,eraseDelay:40,newTextDelay:2000,loaderMinTime:2500,loaderFadeTime:9000,},selectors:{loader:"#loader",canvas:"#webgl-canvas",typewriter:"#typewriter",scrollProgress:"#scroll-progress",mobileMenu:"#mobile-menu",mobileMenuBtn:"#mobile-menu-btn",closeMenuBtn:"#close-menu-btn",mobileLinks:".nav-link-mobile",}};let state={starSpeedMultiplier:0.05,roleIndex:0,charIndex:0,isDeleting:false,};const SmoothScroll={init(){this.lenis=new Lenis({duration:1.8,easing:(t)=> 1-Math.pow(1-t,4),direction:"vertical",smooth:true,smoothTouch:true,touchMultiplier:1.5,});this.bindEvents();this.syncGSAP();this.handleAnchors();},bindEvents(){this.lenis.on("scroll",ScrollTrigger.update);this.lenis.on("scroll",({progress})=>{gsap.to(Config.selectors.scrollProgress,{scaleX:progress,duration:0.1,ease:"none",});});},syncGSAP(){gsap.ticker.add((time)=>{this.lenis.raf(time*1000);});gsap.ticker.lagSmoothing(0);gsap.registerPlugin(ScrollTrigger);},handleAnchors(){document.querySelectorAll('a[href^="#"]').forEach((anchor)=>{anchor.addEventListener("click",(e)=>{e.preventDefault();const target=document.querySelector(anchor.getAttribute("href"));if(target){this.lenis.scrollTo(target,{duration:2.5,easing:(t)=> t < 0.5 ? 4*t*t*t:1-Math.pow(-2*t+2,3)/2,offset:-80,});}});});}};const UI={init(){this.initTypewriter();this.initTiltCards();this.initMobileMenu();},initTypewriter(){const el=document.querySelector(Config.selectors.typewriter);if(!el)return;const type=()=>{const currentRole=Config.roles[state.roleIndex];if(state.isDeleting){el.textContent=currentRole.substring(0,state.charIndex-1);state.charIndex--;}else{el.textContent=currentRole.substring(0,state.charIndex+1);state.charIndex++;}if(!state.isDeleting && state.charIndex===currentRole.length){state.isDeleting=true;setTimeout(type,Config.timing.newTextDelay);}else if(state.isDeleting && state.charIndex===0){state.isDeleting=false;state.roleIndex=(state.roleIndex+1)% Config.roles.length;setTimeout(type,500);}else{setTimeout(type,state.isDeleting ? Config.timing.eraseDelay:Config.timing.typeDelay);}};type();},initTiltCards(){const cards=document.querySelectorAll(".tilt-card");cards.forEach((card)=>{let rect=null;let isHovering=false;const updateCard=(e)=>{if(!isHovering || !rect)return;const x=e.clientX-rect.left;const y=e.clientY-rect.top;const centerX=rect.width/2;const centerY=rect.height/2;const rotateX=((y-centerY)/centerY)*8;const rotateY=((centerX-x)/centerX)*8;card.style.transform=`perspective(1000px)rotateX(${rotateX}deg)rotateY(${rotateY}deg)scale3d(1.02,1.02,1.02)`;const angle=Math.atan2(y-centerY,x-centerX)*(180/Math.PI);card.style.setProperty("--glow-angle",`${angle+90}deg`);card.style.setProperty("--mouse-x",`${(x/rect.width)*100}%`);card.style.setProperty("--mouse-y",`${(y/rect.height)*100}%`);};card.addEventListener("mouseenter",()=>{isHovering=true;rect=card.getBoundingClientRect();});card.addEventListener("mousemove",(e)=>{requestAnimationFrame(()=> updateCard(e));});card.addEventListener("mouseleave",()=>{isHovering=false;card.style.transform="";card.style.setProperty("--glow-angle","135deg");card.style.setProperty("--mouse-x","50%");card.style.setProperty("--mouse-y","50%");});});},initMobileMenu(){const btn=document.querySelector(Config.selectors.mobileMenuBtn);const close=document.querySelector(Config.selectors.closeMenuBtn);const menu=document.querySelector(Config.selectors.mobileMenu);const links=document.querySelectorAll(Config.selectors.mobileLinks);if(!btn || !menu)return;const toggle=()=>{menu.classList.toggle("translate-x-full");document.body.classList.toggle("overflow-hidden");};btn.addEventListener("click",toggle);if(close)close.addEventListener("click",toggle);links.forEach(link=> link.addEventListener("click",toggle));}};const Loader={init(){this.handleLoadingScreen();this.initThreeLazyLoad();this.initLottieLazyLoad();},handleLoadingScreen(){window.addEventListener("load",()=>{const loader=document.querySelector(Config.selectors.loader);if(!loader)return;setTimeout(()=>{loader.classList.add("opacity-0");setTimeout(()=>{loader.style.display="none";},Config.timing.loaderFadeTime);},Config.timing.loaderMinTime);});},initThreeLazyLoad(){const canvas=document.querySelector(Config.selectors.canvas);if(!canvas)return;const observer=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){Scene3D.init();observer.disconnect();}});},{rootMargin:"200px"});observer.observe(canvas);},initLottieLazyLoad(){const lotties=document.querySelectorAll("lottie-player[data-src]");if(!lotties.length)return;if("IntersectionObserver" in window){const observer=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){const player=entry.target;const src=player.getAttribute("data-src");if(src){player.setAttribute("src",src);player.removeAttribute("data-src");player.addEventListener("ready",()=>{player.play();},{once:true});}observer.unobserve(player);}});},{rootMargin:"500px"});lotties.forEach(l=> observer.observe(l));}else{lotties.forEach(player=>{const src=player.getAttribute("data-src");if(src){player.setAttribute("src",src);player.removeAttribute("data-src");}});}}};const Scene3D={init(){const canvas=document.querySelector(Config.selectors.canvas);if(!canvas)return;this.clock=new THREE.Clock();this.scene=new THREE.Scene();this.scene.fog=new THREE.FogExp2(0x0f0017,0.002);this.camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1000);this.camera.position.z=7;this.renderer=new THREE.WebGLRenderer({canvas,alpha:true,antialias:true});this.renderer.setSize(window.innerWidth,window.innerHeight);this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2));this.createObjects();this.initAnimations();this.bindEvents();this.animate();},createObjects(){const createStars=(count,size,spread,opacity)=>{const geo=new THREE.BufferGeometry();const pos=new Float32Array(count*3);for(let i=0;i < count*3;i++)pos[i]=(Math.random()-0.5)*spread;geo.setAttribute("position",new THREE.BufferAttribute(pos,3));return new THREE.Points(geo,new THREE.PointsMaterial({size,color:0xffffff,transparent:true,opacity,sizeAttenuation:true}));};this.stars=[ createStars(1500,0.05,80,0.9),createStars(1000,0.08,120,0.6),createStars(500,0.12,150,0.3)];this.scene.add(...this.stars);this.crystalGeo=new THREE.IcosahedronGeometry(1.8,1);this.crystalMat=new THREE.MeshBasicMaterial({color:0x2dd4bf,wireframe:true,transparent:true,opacity:0.12});this.crystal=new THREE.Mesh(this.crystalGeo,this.crystalMat);this.scene.add(this.crystal);this.ringGeo=new THREE.TorusGeometry(3.5,0.02,16,100);this.ringMat=new THREE.MeshBasicMaterial({color:0x2dd4bf,transparent:true,opacity:0.2});this.ring=new THREE.Mesh(this.ringGeo,this.ringMat);this.ring.rotation.x=Math.PI/2;this.scene.add(this.ring);},initAnimations(){gsap.to(this.crystal.position,{z:5,scrollTrigger:{trigger:"body",start:"top top",end:"bottom bottom",scrub:1.5}});gsap.to(this.crystal.rotation,{x:Math.PI*4,y:Math.PI*3,scrollTrigger:{trigger:"body",start:"top top",end:"bottom bottom",scrub:1.5}});gsap.to(this.ring.rotation,{x:Math.PI/3,y:Math.PI*2,scrollTrigger:{trigger:"body",start:"top top",end:"bottom bottom",scrub:1}});gsap.to(this.ring.position,{z:5,scrollTrigger:{trigger:"body",start:"top top",end:"bottom bottom",scrub:1.5}});ScrollTrigger.create({trigger:"footer",start:"top bottom",onEnter:()=> gsap.to(state,{starSpeedMultiplier:2.5,duration:1}),onLeaveBack:()=> gsap.to(state,{starSpeedMultiplier:0.05,duration:2})});},bindEvents(){this.mouseX=0;this.mouseY=0;window.addEventListener("mousemove",(e)=>{this.mouseX=(e.clientX/window.innerWidth-0.5)*2;this.mouseY=(e.clientY/window.innerHeight-0.5)*2;});window.addEventListener("resize",()=>{this.camera.aspect=window.innerWidth/window.innerHeight;this.camera.updateProjectionMatrix();this.renderer.setSize(window.innerWidth,window.innerHeight);});},animate(){const elapsed=this.clock.getElapsedTime();this.crystal.rotation.y+=0.003;this.crystal.rotation.x+=0.001;this.ring.rotation.z=elapsed*0.1;this.stars[0].rotation.y=elapsed*state.starSpeedMultiplier+this.mouseX*0.15;this.stars[0].rotation.x=this.mouseY*0.1;this.stars[1].rotation.y=elapsed*state.starSpeedMultiplier*0.7+this.mouseX*0.1;this.stars[1].rotation.x=this.mouseY*0.08;this.stars[2].rotation.y=elapsed*state.starSpeedMultiplier*0.4+this.mouseX*0.05;const pulse=(Math.sin(elapsed*2)+1)*0.5;this.crystalMat.opacity=0.08+pulse*0.08;this.renderer.render(this.scene,this.camera);requestAnimationFrame(()=> this.animate());}};const Animations={init(){this.heroReveal();this.sectionReveals();this.timelineItems();this.glassCards();this.skillBadges();this.staggerItems();this.footerAnimations();this.parallaxBlobs();this.revealUps();this.footerSocials();},heroReveal(){const tl=gsap.timeline({defaults:{ease:"power4.out"}});tl.fromTo(".hero-title",{autoAlpha:0,y:150,scale:0.8,rotateX:15},{autoAlpha:1,y:0,scale:1,rotateX:0,duration:2.5,delay:0.3}).fromTo(".hero-content",{autoAlpha:0,y:40,filter:"blur(10px)"},{autoAlpha:1,y:0,filter:"blur(0px)",duration:1.5},"-=1.5");},sectionReveals(){gsap.utils.toArray(".section-reveal").forEach((section)=>{const header=section.querySelector("h2");const label=section.querySelector(".font-technical");gsap.fromTo(section,{autoAlpha:0},{scrollTrigger:{trigger:section,start:"top 85%",end:"top 40%",scrub:1.5},autoAlpha:1});if(header){gsap.fromTo(header,{autoAlpha:0,x:-100,skewX:-5},{scrollTrigger:{trigger:section,start:"top 80%",toggleActions:"play none none reverse"},autoAlpha:1,x:0,skewX:0,duration:1.2,ease:"power3.out"});}if(label){gsap.fromTo(label,{autoAlpha:0,letterSpacing:"0.5em"},{scrollTrigger:{trigger:section,start:"top 85%",toggleActions:"play none none reverse"},autoAlpha:1,letterSpacing:"0.05em",duration:1,ease:"power2.out"});}});},timelineItems(){gsap.utils.toArray(".timeline-item").forEach((item,i)=>{const content=item.querySelector(".timeline-content");const icon=item.querySelector(".timeline-icon");const isEven=i % 2===0;gsap.fromTo(content,{autoAlpha:0,x:isEven ? 80:-80,rotateY:isEven ? 15:-15,scale:0.9},{scrollTrigger:{trigger:item,start:"top 80%",toggleActions:"play none none reverse"},autoAlpha:1,x:0,rotateY:0,scale:1,duration:1,ease:"power3.out",delay:i*0.1});if(icon){gsap.fromTo(icon,{scale:0,autoAlpha:0},{scrollTrigger:{trigger:item,start:"top 80%",toggleActions:"play none none reverse"},scale:1,autoAlpha:1,duration:0.6,ease:"back.out(2)"});}});},glassCards(){gsap.utils.toArray(".glass-card").forEach((card,i)=>{gsap.fromTo(card,{autoAlpha:0,y:60,rotateX:10,transformPerspective:1000},{scrollTrigger:{trigger:card,start:"top 85%",toggleActions:"play none none reverse"},autoAlpha:1,y:0,rotateX:0,duration:1,ease:"power2.out",delay:(i % 4)*0.08});});},skillBadges(){const badges=document.querySelectorAll(".skill-badge");if(badges.length){gsap.fromTo(badges,{autoAlpha:0,y:20,scale:0.8},{scrollTrigger:{trigger:".bento-grid",start:"top 75%",toggleActions:"play none none reverse"},autoAlpha:1,y:0,scale:1,duration:0.6,stagger:{each:0.03,ease:"power2.out"}});}},staggerItems(){if(document.querySelectorAll(".stagger-item").length){gsap.set(".stagger-item",{autoAlpha:0,y:40,scale:0.95});ScrollTrigger.batch(".stagger-item",{onEnter:(batch)=> gsap.to(batch,{autoAlpha:1,y:0,scale:1,duration:0.8,stagger:0.15,ease:"power3.out"}),onLeaveBack:(batch)=> gsap.to(batch,{autoAlpha:0,y:40,scale:0.95,duration:0.4}),start:"top 88%"});}},footerAnimations(){const el=document.querySelector("footer h2");if(el){gsap.fromTo(el,{autoAlpha:0,scale:0.7,y:100},{scrollTrigger:{trigger:"footer",start:"top 90%",end:"top 40%",scrub:1},autoAlpha:1,scale:1,y:0});}},parallaxBlobs(){gsap.utils.toArray(".parallax-blob").forEach((blob)=>{gsap.to(blob,{y:window.innerHeight*blob.getAttribute("data-speed"),ease:"none",scrollTrigger:{trigger:"body",start:"top top",end:"bottom bottom",scrub:true}});});},revealUps(){gsap.utils.toArray(".reveal-up").forEach((el)=>{gsap.fromTo(el,{autoAlpha:0,y:50,filter:"blur(5px)"},{scrollTrigger:{trigger:el,start:"top 85%",toggleActions:"play none none reverse"},autoAlpha:1,y:0,filter:"blur(0px)",duration:0.8,ease:"power2.out"});});},footerSocials(){const links=document.querySelectorAll(".social-pill");if(links.length){gsap.fromTo(links,{autoAlpha:0,y:30,scale:0.9},{scrollTrigger:{trigger:"footer .flex-wrap",start:"top 85%",toggleActions:"play none none reverse"},autoAlpha:1,y:0,scale:1,duration:0.6,stagger:0.08,ease:"back.out(1.5)"});}}};document.addEventListener("DOMContentLoaded",()=>{SmoothScroll.init();UI.init();Loader.init();Animations.init();});